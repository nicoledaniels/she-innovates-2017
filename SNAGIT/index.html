<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
    <title> SnagIt! </title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style type="text/css">
      body {
          margin: 0;
      }
      #resultsModal {
        text-align: center;
      }
  </style>


</head>

<body>

<div class="modal" id="resultsModal" role="dialog">
  <div class="modal-dialogue">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close close-button" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"> Item Summary </h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-4">
            <img src="http://www.bagzone.co.uk/shop/s139-black-side.jpg" height="100" width="100" class="item-image img-responsive center-block" />
          </div>
          <h3 class="item-title"> Gucci Bag </h3>
          <h4 class="item-description"> “This Relic crossbody bag is the perfect size for all your daily essentials.” </h4>
          <p> How much would you be willing to pay for this bag? </p>
          <div class="col-md-6 col-md-offset-5" width="200">
              <select class="form-control" id="exampleSelect1">
                <option>$0</option>
                <option>$10</option>
                <option>$20</option>
                <option>$30</option>
                <option>$40</option>
                <option>$50</option>
              </select>
          </div>
          <div class="col-md-6 col-md-offset-5">
            <p></p>
            <p> What do you think about this bag? (Max 256 characters)</p>
            <textarea class="form-control" maxlength="256" rows="3" id="comment"></textarea>
          </div>
        </div>
        <div class="row">
        </div>
        <div class="row">
        </div>
        <div class="row">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="next-button">Next</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

$(document).ready(function() {
  var item = 1;
  var itemTitles = ["Relic Evie Crossbody Bag", "Rosetti Crossbody Bag", "LC Lauren Conrad Ring Convertible Crossbody Bag", "Rosetti This N' That Crossbody Bag", "Apt. 9® Zoe Laser-Cut Convertible Dome Satchel", "Apt. 9® Zoe Pocket Crossbody Bag", "Tig II by Tignanello Emily Crossbody Bag", "Donna Sharp Hipster Montreal Quilted Patchwork Crossbody Bag", "REED Atlantique Convertible Mini Satchel", "Unionbay Geometric Studded Crossbody Bag", "Deluxity Annette Crossbody Bag", "T-Shirt & Jeans Patchwork Saddle Crossbody Bag", "Olivia Miller Neilla Tassel Saddle Crossbody Bag", "Candie's® Sabrina Crossbody Saddle Bag", "Rosetti Double-Time Straw Crossbody Bag "];
  var itemDescriptions = ["This Relic crossbody bag is the perfect size for all your daily essentials.", "Give your look a touch of floral flair with this Rosetti crossbody bag.", "Showcase your sleek sense of style with this LC Lauren Conrad crossbody bag.", "Give your look a sporty touch with this Rosetti crossbody bag.", "This Apt. 9 domed satchel features laser-cut accents for a fashionable look.", "The ultimate bag for all your day-to-day outings, this Apt. 9 crossbody bag offer style and class.", "Keep your fashion up to date with this Tig II by Tignanello handbag","This Donna Sharp crossbody bag is perfect for all your day-to-day tasks. The quilted patchwork design lends a unique look. Transform any look with this edgy, trendy and fashionable bag.", "Give your full attention to this REED mini satchel for easy accessorizing.", "This trendy studded crossbody bag from Unionbay has room for all your daily essentials.", "This stylish crossbody by Deluxity features an eye-catching gold-tone medallion.","Carry your phone, lip balm and cash in this T-Shirt & Jeans saddle crossbody bag.", "Stay up to date with the trends carrying this Olivia Miller saddle bag.","This compact Candie's saddle bag offers hands-free style for your cash, keys and phone.","Give yourself a fashion-forward look with this Rosetti crossbody bag."];

  //$('#resultsModal').hide();
  $('.close-button').on("click", function(){
    $('#resultsModal').hide();
  });

  $('.next-button').on("click", function(){
    var combinedArray = lovedProducts.concat(neutralProducts)
    var superCombined = combinedArray.concat(likedProducts);
    if(item === superCombined.length){
      $('#resultsModal').hide();
      game.paused = false; 
      lovedProducts = [];
      neutralProducts = [];
      likedProducts = [];
      superCombined = [];
      item = 1;
    }
    else if(item < superCombined.length){
      var description = $(".item-description");
      var title = $(".item-title");
      var image = $(".item-image");
      title.replaceWith("<h3 class=\"item-title\">" + itemTitles[superCombined[item]] + "</h3>");
      description.replaceWith("<h4 class=\"item-description\">" + itemDescriptions[superCombined[item]]  + "</h4>");
      image.replaceWith("<img src=\"../SNAGIT/assets/" + superCombined[item] + ".png\"" + "height=\"100\" width=\"100\" class=\"item-image img-responsive center-block\" />");
      item++;
    }
    
  });


});

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

function preload() {

    game.load.image('sky', 'assets/background.png');
    game.load.image('ground', 'assets/baseline.png');
    game.load.image('product1', 'assets/1.png');
    game.load.image('product2', 'assets/2.png');
    game.load.image('product3', 'assets/3.png');
    game.load.image('product4', 'assets/4.png');
    game.load.image('product5', 'assets/5.png');
    game.load.image('product6', 'assets/6.png');
    game.load.image('product7', 'assets/7.png');
    game.load.image('product8', 'assets/8.png');
    game.load.image('product9', 'assets/9.png');
    game.load.image('product10', 'assets/10.png');
    game.load.image('product11', 'assets/11.png');
    game.load.image('product12', 'assets/12.png');
    game.load.image('product13', 'assets/13.png');
    game.load.image('product14', 'assets/14.png');
    game.load.image('product15', 'assets/15.png');
    game.load.spritesheet('dude', 'assets/dude.png', 32, 48);
    
    game.load.spritesheet('dudeLove', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeLike', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeNeutral', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeHate', 'assets/dude1.png', 32, 48);

    
    game.load.image('love', 'assets/diamond.png');
    game.load.image('like', 'assets/like.png');
    game.load.image('neutral', 'assets/neutral.png');
    game.load.image('hate', 'assets/hate.png');
}

var player;
var platforms;
var cursors;

var products;
var score = 0;
var scoreText;
var commentsText;

var productID = 1;
var commentID = 0;
// 0 : love
// 1: like
// 2: neutral
// 3 : hate
var lovedProducts = [];
var likedProducts = [];
var neutralProducts = [];
var hateProducts = [];

var loveIt;
var likeIt;
var neutralIt;
var hateIt;

var loveItKey;
var likeItKey;
var neutralKey;
var hateItKey;

var loveCount;
var likeCount;
var neutralCount;
var hateCount;

function create() {

    //  We're going to be using physics, so enable the Arcade Physics system
    game.physics.startSystem(Phaser.Physics.ARCADE);

    //  A simple background for our game
    game.add.sprite(0, 0, 'sky');

    //  The platforms group contains the ground and the 2 ledges we can jump on
    platforms = game.add.group();

    //  We will enable physics for any object that is created in this group
    platforms.enableBody = true;
    // Here we create the ground.
    var ground = platforms.create(0, game.world.height - 125, 'ground');

    //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
    //ground.scale.setTo(2, 2);

    //  This stops it from falling away when you jump on it
    ground.body.immovable = true;

    // The player and its settings
    player = game.add.sprite(32, game.world.height - 250, 'dude');

    //  We need to enable physics on the player
    game.physics.arcade.enable(player);

    //  Player physics properties. Give the little guy a slight bounce.
    player.body.bounce.y = 0.2;
    player.body.gravity.y = 300;
    player.body.collideWorldBounds = true;

    //  Our two animations, walking left and right.
    player.animations.add('left', [0, 1, 2, 3], 10, true);
    player.animations.add('right', [5, 6, 7, 8], 10, true);

    //  Finally some products to collect
    products = game.add.group();

    //  We will enable physics for any product that is created in this group
    products.enableBody = true;

    game.time.events.repeat(Phaser.Timer.SECOND * 2, 15, createStars, this);

    //  The score
    scoreText = game.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });
    commentsText = game.add.text(500, 16, 'comments', { fontSize: '32px', fill: '#000' });
    //  Our controls.
    cursors = game.input.keyboard.createCursorKeys(); 
    
    // Buttons at the bottom
    var temp = (game.world.width)/6
    loveIt = game.add.sprite(temp, game.world.height - 50, 'love');
    likeIt = game.add.sprite(2*temp, game.world.height - 50, 'like');
    neutralIt = game.add.sprite( 3 * temp, game.world.height - 50, 'neutral');
    hateIt = game.add.sprite(4 * temp, game.world.height - 50, 'hate');
    
    loveIt.inputEnabled = true;
    likeIt.inputEnabled = true;
    neutralIt.inputEnabled = true;
    hateIt.inputEnabled = true;
    
    loveIt.events.onInputDown.add(listenerLoveIt, this);
    likeIt.events.onInputDown.add(listenerLikeIt, this);
    neutralIt.events.onInputDown.add(listenerNeutralIt, this);
    hateIt.events.onInputDown.add(listenerHateIt, this);
    
    loveItKey = game.input.keyboard.addKey(Phaser.Keyboard.W);
    likeItKey = game.input.keyboard.addKey(Phaser.Keyboard.A);
    neutralKey = game.input.keyboard.addKey(Phaser.Keyboard.S);
    hateItKey = game.input.keyboard.addKey(Phaser.Keyboard.D);
    
    loveCount = game.add.text(500, 16, '', { fontSize: '32px', fill: '#000' });
    likeCount = game.add.text(500, 16, '', { fontSize: '32px', fill: '#000' });
    neutralCount = game.add.text(500, 16, '', { fontSize: '32px', fill: '#000' });
    hateCount = game.add.text(500, 16, '', { fontSize: '32px', fill: '#000' });
}

function update() {

    //  Collide the player and the products with the platforms
    game.physics.arcade.collide(player, platforms);
    game.physics.arcade.collide(products, platforms, killProduct, null, this);

    //  Checks to see if the player overlaps with any of the products, if he does call the collectProduct function
    game.physics.arcade.overlap(player, products, collectProduct, null, this);
    
    //  Reset the players velocity (movement)
    player.body.velocity.x = 0;

    if (cursors.left.isDown)
    {
        //  Move to the left
        player.body.velocity.x = -150;

        player.animations.play('left');
    }
    else if (cursors.right.isDown)
    {
        //  Move to the right
        player.body.velocity.x = 150;

        player.animations.play('right');
    }
    else
    {
        //  Stand still
        player.animations.stop();

        player.frame = 4;
    }
    
    //  Allow the player to jump if they are touching the ground.
    if (cursors.up.isDown && player.body.touching.down)
    {
        player.body.velocity.y = -350;
    }
    if ( loveItKey.justPressed() ){    
       listenerLoveIt();
    }
    if ( likeItKey.justPressed() ){    
       listenerLikeIt();
    }
    if ( neutralKey.justPressed() ){    
       listenerNeutralIt();
    }
    if ( hateItKey.justPressed() ){    
       listenerHateIt();
    }
}

function collectProduct (player, product) {
    var name = product.name;
    // Removes the product from the screen
    product.kill();
    
    //  Add and update the score
    score += 1;
    scoreText.text = 'Score: ' + score + "   " + name;
    if (commentID  == 0)
    {
        lovedProducts.push(name);
        loveCount.text = lovedProducts.length;
    }
    else if (commentID == 1)
    {
        likedProducts.push(name);
        likeCount.text = likedProducts.length;
    }
    else if (commentID == 2)
    {
        neutralProducts.push(name);
        neutralCount.text = neutralProducts.length;
    }
    else{
        hateProducts.push(name);
        hateCount.text = hateProducts.length;
    } 

    // Overlay popup when user fills cart
  var itemTitles = ["Relic Evie Crossbody Bag", "Rosetti Crossbody Bag", "LC Lauren Conrad Ring Convertible Crossbody Bag", "Rosetti This N' That Crossbody Bag", "Apt. 9® Zoe Laser-Cut Convertible Dome Satchel", "Apt. 9® Zoe Pocket Crossbody Bag", "Tig II by Tignanello Emily Crossbody Bag", "Donna Sharp Hipster Montreal Quilted Patchwork Crossbody Bag", "REED Atlantique Convertible Mini Satchel", "Unionbay Geometric Studded Crossbody Bag", "Deluxity Annette Crossbody Bag", "T-Shirt & Jeans Patchwork Saddle Crossbody Bag", "Olivia Miller Neilla Tassel Saddle Crossbody Bag", "Candie's® Sabrina Crossbody Saddle Bag", "Rosetti Double-Time Straw Crossbody Bag "];
  var itemDescriptions = ["This Relic crossbody bag is the perfect size for all your daily essentials.", "Give your look a touch of floral flair with this Rosetti crossbody bag.", "Showcase your sleek sense of style with this LC Lauren Conrad crossbody bag.", "Give your look a sporty touch with this Rosetti crossbody bag.", "This Apt. 9 domed satchel features laser-cut accents for a fashionable look.", "The ultimate bag for all your day-to-day outings, this Apt. 9 crossbody bag offer style and class.", "Keep your fashion up to date with this Tig II by Tignanello handbag","This Donna Sharp crossbody bag is perfect for all your day-to-day tasks. The quilted patchwork design lends a unique look. Transform any look with this edgy, trendy and fashionable bag.", "Give your full attention to this REED mini satchel for easy accessorizing.", "This trendy studded crossbody bag from Unionbay has room for all your daily essentials.", "This stylish crossbody by Deluxity features an eye-catching gold-tone medallion.","Carry your phone, lip balm and cash in this T-Shirt & Jeans saddle crossbody bag.", "Stay up to date with the trends carrying this Olivia Miller saddle bag.","This compact Candie's saddle bag offers hands-free style for your cash, keys and phone.","Give yourself a fashion-forward look with this Rosetti crossbody bag."];

    if (lovedProducts.length === 4 || lovedProducts.length === 4 || neutralProducts.length === 4){
      game.paused = true;
      $('#resultsModal').show();
      var combinedArray = lovedProducts.concat(neutralProducts)
      var superCombined = combinedArray.concat(likedProducts);
      var description = $(".item-description");
      var title = $(".item-title");
      var image = $(".item-image");
      title.replaceWith("<h3 class=\"item-title\">" + itemTitles[superCombined[0]] + "</h3>");
      description.replaceWith("<h4 class=\"item-description\">" + itemDescriptions[superCombined[0]]  + "</h4>");
      image.replaceWith("<img src=\"../SNAGIT/assets/" + superCombined[0] + ".png\"" + "height=\"100\" width=\"100\" class=\"item-image img-responsive center-block\" />");
    }
}

function killProduct (product, platform) {
    
    // Removes the product from the screen
    product.kill();
}

function createStars() {

     //  Create a product inside of the 'products' group
    var productName = 'product' + productID
    var product = products.create(game.rnd.integerInRange(10, 550), 0, productName);

    //  Let gravity do its thing
    product.body.gravity.y = 100;
    product.name = productID;
    productID = productID + 1;
}

function listenerLoveIt() {
scoreText.text = 'love' ;
player.loadTexture('dudeLove', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 0;
}

function listenerLikeIt() {

scoreText.text = 'like' ;
player.loadTexture('dudeLike', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 1;
}

function listenerNeutralIt() {
scoreText.text = 'neutral' ;
player.loadTexture('dudeNeutral', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 2;
}

function listenerHateIt() {
scoreText.text = 'hate' ;
player.loadTexture('dudeHate', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 3;
}

</script>


  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>
