<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
    <title>SNAGIT- Tag Line</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(1000, 666, Phaser.AUTO, '', { preload: preload, create: create, update: update });

function preload() {

    game.load.image('sky', 'assets/background.png');
    game.load.image('ground', 'assets/baseline.png');
    game.load.image('product0', 'assets/0.png');
    game.load.image('product1', 'assets/1.png');
    game.load.image('product2', 'assets/2.png');
    game.load.image('product3', 'assets/3.png');
    game.load.image('product4', 'assets/4.png');
    game.load.image('product5', 'assets/5.png');
    game.load.image('product6', 'assets/6.png');
    game.load.image('product7', 'assets/7.png');
    game.load.image('product8', 'assets/8.png');
    game.load.image('product9', 'assets/9.png');
    game.load.image('product10', 'assets/10.png');
    game.load.image('product11', 'assets/11.png');
    game.load.image('product12', 'assets/12.png');
    game.load.image('product13', 'assets/13.png');
    game.load.image('product14', 'assets/14.png');
    game.load.spritesheet('dude', 'assets/shoppingcart.png', 168, 164);
    
    game.load.spritesheet('dudeLove', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeLike', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeNeutral', 'assets/dude1.png', 32, 48);
    game.load.spritesheet('dudeHate', 'assets/dude1.png', 32, 48);

    
    game.load.image('love', 'assets/love.png');
    game.load.image('like', 'assets/like.png');
    game.load.image('neutral', 'assets/meh.png');
    game.load.image('hate', 'assets/hate.png');
}

var player;
var platforms;
var cursors;

var products;
var score = 0;
var scoreText;

var productID = 0;
var commentID = 0;
// 0 : love
// 1: like
// 2: neutral
// 3 : hate
var lovedProducts = [];
var likedProducts = [];
var neutralProducts = [];
var hateProducts = [];

var loveIt;
var likeIt;
var neutralIt;
var hateIt;

var loveItKey;
var likeItKey;
var neutralKey;
var hateItKey;

var loveCount;
var likeCount;
var neutralCount;
var hateCount;

function create() {

    //  We're going to be using physics, so enable the Arcade Physics system
    game.physics.startSystem(Phaser.Physics.ARCADE);

    //  A simple background for our game
    game.add.sprite(0, 0, 'sky');

    //  The platforms group contains the ground and the 2 ledges we can jump on
    platforms = game.add.group();

    //  We will enable physics for any object that is created in this group
    platforms.enableBody = true;

    // Here we create the ground.
    var ground = platforms.create(0, game.world.height - 64, 'ground');

    //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
    //ground.scale.setTo(2, 2);

    //  This stops it from falling away when you jump on it
    ground.body.immovable = true;

    // The player and its settings
    player = game.add.sprite(62, game.world.height - 128, 'dude');

    //  We need to enable physics on the player
    game.physics.arcade.enable(player);

    //  Player physics properties. Give the little guy a slight bounce.
    player.body.bounce.y = 0.2;
    player.body.gravity.y = 300;
    player.body.collideWorldBounds = true;

    //  Our two animations, walking left and right.
    player.animations.add('left', [0], 10, true);
    player.animations.add('right', [1], 10, true);

    //  Finally some products to collect
    products = game.add.group();

    //  We will enable physics for any product that is created in this group
    products.enableBody = true;

    game.time.events.repeat(Phaser.Timer.SECOND * 2, 15, createStars, this);

    //  The score
    scoreText = game.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });
    //  Our controls.
    cursors = game.input.keyboard.createCursorKeys(); 
    
    // Buttons at the bottom
    var temp = (game.world.height)/5;
    loveIt = game.add.sprite(10, game.world.height - temp, 'love');
    likeIt = game.add.sprite(10, game.world.height - 2 * temp, 'like');
    neutralIt = game.add.sprite( 10, game.world.height - 3 * temp, 'neutral');
    hateIt = game.add.sprite(10, game.world.height - 4 * temp, 'hate');
    
    loveIt.inputEnabled = true;
    likeIt.inputEnabled = true;
    neutralIt.inputEnabled = true;
    hateIt.inputEnabled = true;
    
    loveIt.events.onInputDown.add(listenerLoveIt, this);
    likeIt.events.onInputDown.add(listenerLikeIt, this);
    neutralIt.events.onInputDown.add(listenerNeutralIt, this);
    hateIt.events.onInputDown.add(listenerHateIt, this);
    
    loveItKey = game.input.keyboard.addKey(Phaser.Keyboard.W);
    likeItKey = game.input.keyboard.addKey(Phaser.Keyboard.A);
    neutralKey = game.input.keyboard.addKey(Phaser.Keyboard.S);
    hateItKey = game.input.keyboard.addKey(Phaser.Keyboard.D);
    
    loveCount = game.add.text(30, game.world.height - temp + 60, '', { fontSize: '32px', fill: '#000' });
    likeCount = game.add.text(30, game.world.height - 2 * temp + 60, '', { fontSize: '32px', fill: '#000' });
    neutralCount = game.add.text(30, game.world.height - 3 * temp + 60, '', { fontSize: '32px', fill: '#000' });
    hateCount = game.add.text(30, game.world.height - 4 * temp + 60, '', { fontSize: '32px', fill: '#000' });
   //	Font style
    loveCount.font = 'Arial Black';
    loveCount.fontSize = 35;
    loveCount.fontWeight = 'bold';

    //	Stroke color and thickness
    loveCount.stroke = '#000000';
    loveCount.strokeThickness = 6;
    loveCount.fill = '#43d637';
    
    loveCount.font = 'Arial Black';
    loveCount.fontSize = 35;
    loveCount.fontWeight = 'bold';

    //	Stroke color and thickness
    likeCount.stroke = '#000000';
    likeCount.strokeThickness = 6;
    likeCount.fill = '#43d637';
    
    likeCount.font = 'Arial Black';
    likeCount.fontSize = 35;
    likeCount.fontWeight = 'bold';

    //	Stroke color and thickness
    neutralCount.stroke = '#000000';
    neutralCount.strokeThickness = 6;
    neutralCount.fill = '#43d637';
    
    neutralCount.font = 'Arial Black';
    neutralCount.fontSize = 35;
    neutralCount.fontWeight = 'bold';

    //	Stroke color and thickness
    hateCount.stroke = '#000000';
    hateCount.strokeThickness = 6;
    hateCount.fill = '#43d637';
    
    hateCount.font = 'Arial Black';
    hateCount.fontSize = 35;
    hateCount.fontWeight = 'bold';
    
    
    }

function update() {

    //  Collide the player and the products with the platforms
    game.physics.arcade.collide(player, platforms);
    game.physics.arcade.collide(products, platforms, killProduct, null, this);

    //  Checks to see if the player overlaps with any of the products, if he does call the collectProduct function
    game.physics.arcade.overlap(player, products, collectProduct, null, this);
    
    //  Reset the players velocity (movement)
    player.body.velocity.x = 0;

    if (cursors.left.isDown)
    {
        //  Move to the left
        player.body.velocity.x = -150;

        player.animations.play('left');
    }
    else if (cursors.right.isDown)
    {
        //  Move to the right
        player.body.velocity.x = 150;

        player.animations.play('right');
    }
    else
    {
        //  Stand still
        player.animations.stop();

        player.frame = 4;
    }
    
    //  Allow the player to jump if they are touching the ground.
    if (cursors.up.isDown && player.body.touching.down)
    {
        player.body.velocity.y = -350;
    }
    if ( loveItKey.justPressed() ){    
       listenerLoveIt();
    }
    if ( likeItKey.justPressed() ){    
       listenerLikeIt();
    }
    if ( neutralKey.justPressed() ){    
       listenerNeutralIt();
    }
    if ( hateItKey.justPressed() ){    
       listenerHateIt();
    }
}

function collectProduct (player, product) {
    var name = product.name;
    // Removes the product from the screen
    product.kill();
    
    //  Add and update the score
    score += 1;
    scoreText.text = 'Score: ' + score + "   " + name;
    if (commentID  == 0)
    {
        lovedProducts.push(name);
        loveCount.text = lovedProducts.length;
    }
    else if (commentID == 1)
    {
        likedProducts.push(name);
        likeCount.text = likedProducts.length;
    }
    else if (commentID == 2)
    {
        neutralProducts.push(name);
        neutralCount.text = neutralProducts.length;
    }
    else{
        hateProducts.push(name);
        hateCount.text = hateProducts.length;
    } 
}

function killProduct (product, platform) {
    
    // Removes the product from the screen
    product.kill();
}

function createStars() {

     //  Create a product inside of the 'products' group
    var productName = 'product' + productID
    var product = products.create(game.rnd.integerInRange(10, 550), 0, productName);

    //  Let gravity do its thing
    product.body.gravity.y = 100;
    product.name = productID;
    productID = productID + 1;
}

function listenerLoveIt() {
scoreText.text = 'love' ;
player.loadTexture('dudeLove', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 0;
}

function listenerLikeIt() {

scoreText.text = 'like' ;
player.loadTexture('dudeLike', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 1;
}

function listenerNeutralIt() {
scoreText.text = 'neutral' ;
player.loadTexture('dudeNeutral', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 2;
}

function listenerHateIt() {
scoreText.text = 'hate' ;
player.loadTexture('dudeHate', 0 , false);
player.animations.add('left', [0, 1, 2, 3], 10, true);
player.animations.add('right', [5, 6, 7, 8], 10, true);
commentID = 3;
}

</script>

</body>
</html>